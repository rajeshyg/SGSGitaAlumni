graph TB
    subgraph "ğŸ–¥ï¸ UI LAYER - Pages & Routes"
        PostingsPage["/postings<br/>PostingsPage.tsx<br/>ğŸ“„ Lists all postings"]
        MemberDashboard["/dashboard<br/>MemberDashboard.tsx<br/>ğŸ  Unified dashboard<br/>âœ… NO TABS"]
    end

    subgraph "ğŸ¨ UI LAYER - Dashboard Components"
        MemberDashboard --> PersonalizedPosts["PersonalizedPosts.tsx<br/>âœ… Uses PostingCard<br/>âœ… Direct API calls"]
        MemberDashboard --> ActivityTimeline["ActivityTimeline.tsx<br/>âœ… Activity items only<br/>NOT postings"]
        MemberDashboard --> StatsOverview["StatsOverview.tsx<br/>ğŸ“Š Stats widget"]
        MemberDashboard --> QuickActions["QuickActions.tsx<br/>âš¡ Action buttons"]
        MemberDashboard --> RecentConversations["RecentConversations.tsx<br/>ğŸ’¬ Chat previews"]
        MemberDashboard --> OpportunitiesSpotlight["OpportunitiesSpotlight.tsx<br/>ğŸ¯ Opportunities"]
        MemberDashboard --> DomainFocusCard["DomainFocusCard.tsx<br/>ğŸ“ Domain focus"]
        MemberDashboard --> RecommendedConnections["RecommendedConnections.tsx<br/>ğŸ‘¥ Connections"]
    end

    subgraph "ğŸ§© UI LAYER - Shared Components"
        PostingCard["PostingCard.tsx<br/>âœ… CANONICAL<br/>Single source of truth<br/>Renders: badges, domains,<br/>tags, location, author, actions<br/>ğŸ’³ Shows posting ID"]
        NotificationItem["NotificationItem.tsx<br/>ğŸ”” Notification display"]
        ActionCard["ActionCard.tsx<br/>âš¡ Action items"]
    end

    subgraph "ğŸŒ API LAYER - Services"
        APIService["APIService.ts<br/>ğŸ”Œ API Client<br/>Handles all HTTP requests"]
    end

    subgraph "ğŸŒ API LAYER - Endpoints"
        PostingsEndpoint["GET /api/postings/:id<br/>ğŸ“¡ Returns full posting<br/>with all joins"]
        PostingsListEndpoint["GET /api/postings<br/>ğŸ“¡ Returns posting list<br/>âœ… SINGLE SOURCE"]
        LikeEndpoint["POST /api/postings/:id/like<br/>â¤ï¸ Like action"]
        CommentEndpoint["POST /api/postings/:id/comment<br/>ğŸ’¬ Comment action"]
        ShareEndpoint["POST /api/postings/:id/share<br/>ğŸ“¤ Share action"]
    end

    subgraph "ğŸ’¾ DATABASE LAYER"
        PostingsTable[("POSTINGS<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>id PK<br/>title<br/>content<br/>author_id FK<br/>created_at<br/>published_at<br/>status<br/>posting_type<br/>location<br/>location_type<br/>urgency_level")]
        
        UsersTable[("USERS<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>id PK<br/>first_name<br/>last_name<br/>email")]
        
        TagsTable[("TAGS<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>id PK<br/>name")]
        
        DomainsTable[("DOMAINS<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>id PK<br/>name")]
        
        LikesTable[("LIKES<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>id PK<br/>posting_id FK<br/>user_id FK")]
        
        PostingTagsJoin[("posting_tags<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>posting_id FK<br/>tag_id FK")]
        
        PostingDomainsJoin[("posting_domains<br/>â”€â”€â”€â”€â”€â”€â”€â”€<br/>posting_id FK<br/>domain_id FK")]
    end

    subgraph "âœ… ARCHITECTURAL IMPROVEMENTS"
        Resolved1["âœ… Simplified data flow<br/>Direct API calls to /api/postings<br/>No feed system complexity"]
        Resolved2["âœ… Unified dashboard<br/>Removed tabs (Overview/Feed)<br/>Single cohesive view"]
        Resolved3["âœ… Consistent posting display<br/>PostingCard used everywhere<br/>Same data source"]
        Resolved4["âœ… Posting ID visibility<br/>Visible in all posting displays<br/>for debugging"]
    end

    %% PostingsPage flow (CANONICAL PATH)
    PostingsPage -->|"fetches full postings"| APIService
    APIService -->|"GET /api/postings"| PostingsListEndpoint
    PostingsListEndpoint -->|"queries with joins"| PostingsTable
    PostingsListEndpoint --> UsersTable
    PostingsListEndpoint --> TagsTable
    PostingsListEndpoint --> DomainsTable
    PostingsListEndpoint --> LikesTable
    PostingsTable -->|"full posting objects"| PostingsPage
    PostingsPage -->|"âœ… canonical props"| PostingCard

    %% Dashboard PersonalizedPosts flow (SAME AS POSTINGS PAGE)
    PersonalizedPosts -->|"GET /api/postings"| APIService
    APIService -->|"full postings"| PersonalizedPosts
    PersonalizedPosts -->|"âœ… canonical props"| PostingCard

    %% ActivityTimeline (ACTIVITY ONLY - NO POSTINGS)
    ActivityTimeline -.->|"âœ… renders activity only<br/>connections, events, achievements<br/>NO postings"| ActivityTimelineUI[Activity UI elements]

    %% API Service to endpoints
    APIService -->|"posting detail"| PostingsEndpoint
    APIService -->|"like action"| LikeEndpoint
    APIService -->|"comment action"| CommentEndpoint
    APIService -->|"share action"| ShareEndpoint

    %% Posting endpoint to DB (full joins)
    PostingsEndpoint -->|"full query"| PostingsTable
    PostingsEndpoint --> UsersTable
    PostingsEndpoint --> PostingTagsJoin
    PostingsEndpoint --> PostingDomainsJoin
    PostingsEndpoint --> LikesTable

    %% DB relationships
    PostingsTable ---|"author_id"| UsersTable
    PostingsTable ---|"many-to-many"| PostingTagsJoin
    PostingTagsJoin ---|"tag_id"| TagsTable
    PostingsTable ---|"many-to-many"| PostingDomainsJoin
    PostingDomainsJoin ---|"domain_id"| DomainsTable
    PostingsTable ---|"one-to-many"| LikesTable
    LikesTable ---|"user_id"| UsersTable

    %% Action handlers
    PostingCard -->|"onLike(posting.id)"| LikeEndpoint
    PostingCard -->|"onComment(posting.id)"| CommentEndpoint
    PostingCard -->|"onShare(posting.id)"| ShareEndpoint
    LikeEndpoint --> LikesTable

    %% Simplified architecture highlights
    PersonalizedPosts -.-> Resolved1
    MemberDashboard -.-> Resolved2
    PostingCard -.-> Resolved3
    PostingCard -.-> Resolved4

    %% Styling
    classDef canonical fill:#22c55e,stroke:#16a34a,stroke-width:4px,color:#fff
    classDef resolved fill:#10b981,stroke:#059669,stroke-width:3px,color:#fff
    classDef database fill:#8b5cf6,stroke:#7c3aed,stroke-width:2px,color:#fff
    classDef api fill:#f59e0b,stroke:#d97706,stroke-width:2px,color:#fff
    classDef correct fill:#10b981,stroke:#059669,stroke-width:2px,color:#fff

    class PostingCard canonical
    class Resolved1,Resolved2,Resolved3,Resolved4 resolved
    class PostingsTable,UsersTable,TagsTable,DomainsTable,LikesTable,PostingTagsJoin,PostingDomainsJoin database
    class PostingsEndpoint,PostingsListEndpoint,LikeEndpoint,CommentEndpoint,ShareEndpoint,APIService api
    class PersonalizedPosts,ActivityTimeline,MemberDashboard correct